# ìŠ¤í¬ë¦½íŠ¸

### ğŸ”¹ ì™œ Data Managerê°€ í•„ìš”í•œê°€?

---

ğŸ“ **ê²Œì„ ìˆ˜ì¹˜ ë°ì´í„°ëŠ” ë³€í™” ê°€ëŠ¥ì„±ì´ ë†’ìŒ**

- ì˜ˆ: ë ˆë²¨ë³„ ì²´ë ¥, ê³µê²©ë ¥, ê²½í—˜ì¹˜, ëª¬ìŠ¤í„° AI, ë˜ì „ íŒ¨í„´ ë“±
- ì²˜ìŒì—” ì½”ë“œì— í•˜ë“œì½”ë”©í•  ìˆ˜ë„ ìˆìœ¼ë‚˜ ìœ ì§€ë³´ìˆ˜ê°€ ë§¤ìš° ë¶ˆí¸

**ë¬¸ì œì **

- ë°¸ëŸ°ìŠ¤ ì¡°ì • ì‹œ ì½”ë“œë¥¼ ì§ì ‘ ìˆ˜ì •í•´ì•¼ í•¨
- ë¹Œë“œëœ ì‹¤í–‰íŒŒì¼(.apk/.exe)ì— ê°’ì´ ë¬¶ì—¬ë²„ë¦¼
- ìˆ˜ì¹˜ ìˆ˜ì • ì‹œ ì „ì²´ ì•± ì¬ë°°í¬ í•„ìš” (â†’ ìŠ¤í† ì–´ ì‹¬ì‚¬ ì§€ì—°)
- ì„œë²„-í´ë¼ì´ì–¸íŠ¸ ê°„ ìˆ˜ì¹˜ ë¶ˆì¼ì¹˜ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥

âœ… **í•´ê²°ë²• : ë°ì´í„°ë¥¼ ì™¸ë¶€ JSON íŒŒì¼ë¡œ ë¶„ë¦¬**

- ëŸ°íƒ€ì„ ì‹œ ë¡œë”© â†’ ì½”ë“œì™€ ë°ì´í„°ë¥¼ ë¶„ë¦¬
- ì›¹ì—ì„œ JSON íŒŒì¼ë§Œ í•«ìŠ¤ì™‘ ê°€ëŠ¥
- ì„œë²„ì™€ ë™ì¼í•œ ë°ì´í„°ë¥¼ ê³µìœ  â†’ ë°ì´í„° ì¼ê´€ì„± ìœ ì§€
- ë””ìì´ë„ˆë„ ì—‘ì…€ â†’ JSON ë³€í™˜ íˆ´ë¡œ ì‘ì—… ê°€ëŠ¥

<br>
<br>

### ğŸ”¹ JSON ì˜ˆì‹œ íŒŒì¼ ì‘ì„± (StatData.json)

---

- `Resources/Data/StatData.json`ì— ì €ì¥
- êµ¬ì¡° â†’  `"stats"`ë¼ëŠ” ë¦¬ìŠ¤íŠ¸ ì•ˆì— `"level"`, `"hp"`, `"attack"` ì •ë³´ë¥¼ ê°€ì§„ ì˜¤ë¸Œì íŠ¸ë“¤ ì¡´ì¬

```json
{
	"stats": [
		{
			"level" : "1",
			"hp" : "100",
			"attack" : "10"
		},
		{
			"level" : "2",
			"hp" : "150",
			"attack" : "15"
		},
		{
			"level" : "3",
			"hp" : "200",
			"attack" : "20"
		}
	]
}
```

<br>
<br>

### ğŸ”¹ JSON ë¡œë”©ì„ ìœ„í•œ C# í´ë˜ìŠ¤ ì •ì˜

---

JSONì„ íŒŒì‹±í•´ì„œ ë©”ëª¨ë¦¬ë¡œ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ í´ë˜ìŠ¤ êµ¬ì¡° ì •ì˜

- ë°˜ë“œì‹œ `[Serializable]` ì–´íŠ¸ë¦¬ë·°íŠ¸ í•„ìš”

```csharp
[Serializable]
public class Stat
{
	public int level;
	public int hp;
	public int attack;
}

[Serializable]
public class StatData
{
	public List<Stat> stats = new List<Stat>();
}
```

<br>
<br>

### ğŸ”¹ DataManager í´ë˜ìŠ¤ ìƒì„± ë° Init êµ¬ì„±

---

- `Managers/DataManager.cs` ìƒì„±
- `Init()`ì—ì„œ JSON íŒŒì¼ ë¡œë”© ë° íŒŒì‹± ì§„í–‰

```csharp
public class DataManager
{
	public StatData StatData;

	public void Init()
	{
		// 1. Resourcesì—ì„œ TextAsset í˜•íƒœë¡œ JSON íŒŒì¼ ë¡œë“œ
		TextAsset textAsset = Managers.Resource.Load<TextAsset>($"Data/StatData");

		// 2. JsonUtilityë¥¼ ì´ìš©í•´ íŒŒì‹± â†’ StatData ì˜¤ë¸Œì íŠ¸ë¡œ ë³€í™˜
		StatData = JsonUtility.FromJson<StatData>(textAsset.text);

		// 3. í™•ì¸ìš© ë””ë²„ê·¸ ë¡œê·¸
		Debug.Log($"Loaded StatData Count: {StatData.stats.Count}");
	}
}
```

- ì¶œë ¥ ê²°ê³¼

```
Loaded StatData Count: 3
```

<br>
<br>

### ğŸ”¹ Managers.cs ë‚´ DataManager ë“±ë¡

---

âœ… `Managers.cs`ì—ì„œ `DataManager`ë¥¼ í•„ë“œë¡œ ì¶”ê°€í•˜ê³ , Init ì‹œì ì— í•¨ê»˜ ì´ˆê¸°í™”

```csharp
DataManager _data = new DataManager();
public static DataManager Data { get { return Instance._data; } }

static void Init()
{
	if (_instance == null)
	{
		_instance = new Managers();
		_instance._data.Init(); // âœ… DataManager ì´ˆê¸°í™” ì¶”ê°€
	}
}
```

<br>
<br>

### ğŸ”¹ ì „ì²´ êµ¬ì¡° ì‹œê°í™”

---

```
StatData.json
  â””â”€â”€ stats : List<Stat>
             â”œâ”€â”€ Stat { level = 1, hp = 100, attack = 10 }
             â”œâ”€â”€ Stat { level = 2, hp = 150, attack = 15 }
             â””â”€â”€ Stat { level = 3, hp = 200, attack = 20 }

           â†“

DataManager.cs
  â””â”€â”€ public StatData StatData; // Init() ì‹œ ìë™ íŒŒì‹± ë° ë©”ëª¨ë¦¬ ë¡œë”©
```

<br>
<br>

### âœ… ê²°ë¡  ë° ì •ë¦¬

---

| í•­ëª© | ë‚´ìš© |
| --- | --- |
| ê¸°ëŠ¥ ëª©ì  | JSON íŒŒì¼ ê¸°ë°˜ì˜ ì™¸ë¶€ ê²Œì„ ìˆ˜ì¹˜ ë°ì´í„° ë¡œë”© |
| ì´ì  | ì½”ë“œì™€ ë°ì´í„° ë¶„ë¦¬ â†’ ìœ ì§€ë³´ìˆ˜, í•«ìŠ¤ì™‘, ì„œë²„ì—°ë™ ìµœì í™” |
| íŒŒì¼ ìœ„ì¹˜ | `Resources/Data/StatData.json` |
| í´ë˜ìŠ¤ êµ¬ì¡° | `Stat`, `StatData` â†’ `[Serializable]` í•„ìš” |
| íŒŒì‹± ë°©ì‹ | `JsonUtility.FromJson<StatData>(string)` |
| ì—°ë™ ìœ„ì¹˜ | `Managers.cs`ì˜ Init()ì—ì„œ `DataManager.Init()` í˜¸ì¶œ |

### ğŸ“Œ ìµœì¢… ì½”ë“œ ì •ë¦¬

---

**DataManager.cs**

```csharp
using System;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

[Serializable]
public class Stat
{
    public int level;
    public int hp;
    public int attack;
}

[Serializable]
public class StatData
{
    public List<Stat> stats = new List<Stat>();
}

public class DataManager
{
    public StatData StatData;

    public void Init()
    {
        TextAsset textAsset = Managers.Resource.Load<TextAsset>($"Data/StatData");
        StatData = JsonUtility.FromJson<StatData>(textAsset.text);

        Debug.Log($"Loaded StatData Count: {StatData.stats.Count}");
    }
}

```

**Managers.cs**

```csharp
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Managers : MonoBehaviour
{
    static Managers s_instance;
    static Managers Instance { get { Init();  return s_instance; } }

    DataManager _data = new DataManager();
    InputManager _input = new InputManager();
    ResourceManager _resource = new ResourceManager();
    PoolManager _pool = new PoolManager();
    SceneManagerEx _scene = new SceneManagerEx();
    SoundManager _sound = new SoundManager();
    UIManager _ui = new UIManager();
    

    public static DataManager Data { get { return Instance._data; } }
    public static InputManager Input { get { return Instance._input; } }
    public static ResourceManager Resource {  get { return Instance._resource; } }
    public static PoolManager Pool { get { return Instance._pool; } }
    public static SceneManagerEx Scene {  get { return Instance._scene; } }
    public static SoundManager Sound {  get { return Instance._sound; } }
    public static UIManager UI { get { return Instance._ui; } }
    
    void Start()
    {
        Init();
    }

    void Update()
    {
        _input.OnUpdate();
    }

    static void Init()
    {
        if (s_instance == null)
        {
            GameObject go = GameObject.Find("@Managers");
            if (go == null)
            {
                go = new GameObject { name = "@Managers" };
                go.AddComponent<Managers>();
            }

            DontDestroyOnLoad(go);
            s_instance = go.GetComponent<Managers>();

            // Other Managers Init
            s_instance._data.Init();
            s_instance._pool.Init();
            s_instance._sound.Init();
        }
    }

    public static void Clear()
    {
        Input.Clear();
        Sound.Clear();
        Scene.Clear();
        UI.Clear();
        Pool.Clear();
    }
}

```